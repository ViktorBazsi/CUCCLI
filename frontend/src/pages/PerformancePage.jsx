import { Formik, Form } from "formik";
import WriterSelector from "../components/WriterSelector";
import ActorSelector from "../components/ActorSelector";
import DateSelector from "../components/DateSelector";

export default function PerformancePage() {
  const initialValues = {
    topic: "",
    writers: [],
    actors: [],
    recordingRequest: false,
    date: "",
  };

  const handleSubmit = (values) => {
    console.log("Bek√ºld√∂tt adatok:", values);
    // fetch vagy axios POST k√©r√©s itt j√∂het
    // p√©ld√°ul:
    // fetch("/api/performances", {
    //   method: "POST",
    //   headers: { "Content-Type": "application/json" },
    //   body: JSON.stringify(values),
    // });
  };

  return (
    <main className="pt-24 min-h-screen bg-gradient-to-b from-white to-gray-500 px-4">
      <div className="max-w-5xl mx-auto">
        <h1 className="text-4xl font-extrabold text-center mb-12">
          √Åll√≠tsd √∂ssze az el≈ëad√°sod
        </h1>

        <Formik initialValues={initialValues} onSubmit={handleSubmit}>
          {({ values, setFieldValue }) => (
            <Form className="space-y-12">
              {/* T√©ma input */}
              <div className="text-center">
                <label
                  htmlFor="topic"
                  className="block text-xl font-semibold mb-2"
                >
                  V√°lassz t√©m√°t
                </label>
                <textarea
                  id="topic"
                  name="topic"
                  rows="4"
                  placeholder="Pl. m√∫lt, csal√°d, identit√°s, szerelem..."
                  className="w-full max-w-xl mx-auto rounded-xl border border-gray-300 px-4 py-3 text-gray-700 focus:outline-none focus:ring-2 focus:ring-black"
                  value={values.topic}
                  onChange={(e) => setFieldValue("topic", e.target.value)}
                />
              </div>

              {/* √çr√≥k v√°laszt√°sa */}
              <WriterSelector
                selectedWriters={values.writers}
                setSelectedWriters={(newSelection) =>
                  setFieldValue("writers", newSelection)
                }
              />

              {/* Sz√≠n√©szek v√°laszt√°sa */}
              <ActorSelector
                selectedActors={values.actors}
                setSelectedActors={(newSelection) =>
                  setFieldValue("actors", newSelection)
                }
              />

              {/* Felv√©tel k√©r√©s gomb */}
              <div className="flex justify-center">
                <button
                  type="button"
                  onClick={() =>
                    setFieldValue("recordingRequest", !values.recordingRequest)
                  }
                  className={`flex items-center gap-2 px-6 py-3 rounded-2xl font-medium border transition ${
                    values.recordingRequest
                      ? "bg-red-600 text-white hover:bg-red-700"
                      : "border-gray-400 text-gray-800 hover:bg-gray-100"
                  }`}
                >
                  <span className="text-xl">üéôÔ∏è</span>
                  {values.recordingRequest
                    ? "Felv√©telt k√©rtem"
                    : "Felv√©telt k√©rek"}
                </button>
              </div>

              <DateSelector
                selectedDate={values.date}
                setSelectedDate={(date) => setFieldValue("date", date)}
              />

              {/* Bek√ºld√©s gomb */}
              <div className="text-center pt-6">
                <button
                  type="submit"
                  className="bg-black text-white px-8 py-3 rounded-2xl font-semibold hover:bg-gray-800 transition mb-24"
                >
                  Kos√°rba
                </button>
              </div>
            </Form>
          )}
        </Formik>
      </div>
    </main>
  );
}
